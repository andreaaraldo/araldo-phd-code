% Hello
%seed = 3;
%rand('seed',seed);

global severe_debug = true;

output_file = "scenario.dat";

% Define an experiment
experiment.CachePrice = 100;
experiment.MaxCoreCache = 2;
experiment.MaxCachePerBorderRouter = 1;
experiment.MaxTotalCache = 10;
experiment.max_as_num = 2;
experiment.max_obj_num = 3;

% Define the distributions
default_distr_type = "unif_discr";

obj_num_distr.type = default_distr_type;
obj_num_distr.a = 1;
obj_num_distr.b = 3;

replica_num_distr.type = default_distr_type;
replica_num_distr.a = 1;
replica_num_distr.b = 1;

alpha_distr.type = "unif_array";
alpha_distr.array = [0.8, 1.2];

as_gravity = [1 1];

total_demand_distr.type = default_distr_type;
total_demand_distr.a = 100;
total_demand_distr.b = 100;

scenario_num = 2;
RealizationProbabilities = [0.5, 0.5];

% TransitPrice(i,j) is the price for the j-th AS in the i-th scenario
TransitPrice = zeros(scenario_num, experiment.max_as_num);
TransitPrice = [10, 50; 8, 90];

run_ = generate_run(experiment, obj_num_distr, 
					replica_num_distr, alpha_distr, as_gravity, total_demand_distr,
					TransitPrice, scenario_num, RealizationProbabilities);

opl_string = generate_opl_string(run_);

f=fopen(output_file,"w");
fprintf(f,"%s\n",opl_string);
fclose(f);
